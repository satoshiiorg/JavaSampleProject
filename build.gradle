

plugins {
    id 'java'
    id 'application'
}

mainClassName = 'org.satoshii.portfolio.Main'
// mainClassName = 'org.satoshii.portfolio.db.Main'

repositories {
    mavenLocal()
    mavenCentral()
}

dependencies {
    annotationProcessor "org.projectlombok:lombok:1.18.4"
    compileOnly "org.projectlombok:lombok:1.18.4"
    // compile             "com.google.auto.value:auto-value-annotations:1.6.2"
    // annotationProcessor "com.google.auto.value:auto-value:1.6.2"
    compile 'org.mybatis:mybatis:3.4.6'
    
    // 生JDBCマッピング版用
    compile 'org.apache.derby:derby:10.14.1.0'
    compile 'javax.persistence:javax.persistence-api:2.2'
    compile 'commons-beanutils:commons-beanutils:1.9.3'
    compile 'org.apache.commons:commons-lang3:3.4'
    
    implementation "org.slf4j:slf4j-api:1.7.+"
    implementation "ch.qos.logback:logback-classic:1.3.0-alpha4"
    testImplementation "org.junit.jupiter:junit-jupiter-api:5.2.+"
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:5.2.+"
    
    // runtime files(dir: 'src/main/java/org/satoshii/portfolio/data', include: '*.xml')
}


// 標準入力を使う場合
// run {
// //   standardInput = System.in
//     standardInput = new ByteArrayInputStream('201405'.getBytes())
// }


// TODO 初回のDB作成も書いておく
// $ ij db/init.ddl
// $ ij db/init.sql
// $ ij db/init2.ddl
// $ ij db/init2.sql

// シェル経由じゃないとできないかも
// task initDb() {
//     "ij db/init.ddl".execute()
//     "ij db/init.sql".execute()
//     "ij db/init2.ddl".execute()
//     "ij db/init2.sql".execute()
// }

// ant.condition(property: "os", value: "windows") { os(family: "windows") }
// ant.condition(property: "os", value: "unix" ) { os(family: "unix") }
// task initDb(type:Exec) {
//     switch(ant.properties.os){
//         case 'windows':
//             commandLine 'cmd', '/c', 'ij', 'db/init.ddl'
//             commandLine 'cmd', '/c', 'ij', 'db/init.sql'
//             break
//         case 'unix':
//             commandLine 'ij', 'db/init.ddl'
//             commandLine 'ij', 'db/init.sql'
//             break
//     }
// }
